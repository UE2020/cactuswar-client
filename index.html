<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title></title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Ubuntu:wght@700&display=swap');

    .centered {
      position: fixed;
      top: 50%;
      left: 50%;
      /* bring your own prefixes */
      transform: translate(-50%, -50%);
    }

    .ubuntu {
      font-family: "Ubuntu";
      color: black;
      box-shadow: 5px 5px;
    }

    textarea:focus, input:focus{
      outline: none;
    }

  </style>
</head>
<body style='background-image: url("banner_large.png"); background-repeat: no-repeat; background-size: cover; height: 100%;'>
  <canvas id="canvas" style="top: 0; left: 0; position: absolute; background-color: rgba(20, 14, 0, 1.0); z-index: -1; display: none" width="1" height="1"></canvas>
  <canvas id="composite" style="top: 0; left: 0; position: absolute; z-index: 0; display: none" width="1" height="1"></canvas>

    <div class="centered">
      <input class="ubuntu" id="input" placeholder="Insert creative name here..." type="text" onkeydown="onKeyCode(event)" style="border: solid 5px #000000; width: 400px; height: 50px; font-size: 30px; background: white; margin-bottom: 10px;"></input>
      <br>
      <button class="ubuntu" id="button" onclick="startGame()" style="border: solid 5px #000000; width: 414px; height: 60px; font-size: 30px; background: #348feb;">Play</button>
    </div>

<script type=module>
  import { default as init } from './pkg/cactuswar_client.js';

  let gameStarted = false;

  window.onload = function () {
    let nameBox = document.getElementById('input');
    nameBox.value = localStorage.getItem("name");
  }

  window.startGame = function () {
    delete WebAssembly.instantiateStreaming;
    document.body.style = '';
    document.getElementById('button').remove();
    document.getElementById('composite').style.display = 'block';
    document.getElementById('canvas').style.display = 'block';
    let nameBox = document.getElementById('input');
    window.name = nameBox.value;
    localStorage.setItem("name", name);
    nameBox.remove();
    init('./pkg/cactuswar_client_bg.wasm');
  }

  window.onKeyCode = function(event) {
    let key = event.keyCode;
    if (key == 13) {
      startGame();
    }
  }

  //delete WebAssembly.instantiateStreaming;
  //init('./pkg/cactuswar_client_bg.wasm');
</script>
</body>
</html>
